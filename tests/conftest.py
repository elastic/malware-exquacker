import json
from typing import Generator
from unittest.mock import Mock

from elasticsearch import Elasticsearch
from pytest import fixture


@fixture
def es_client(search_response: str) -> Generator[Elasticsearch, None, None]:
    client = Mock()
    client.search.return_value = json.loads(search_response)
    yield client
