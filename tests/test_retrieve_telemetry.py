import os

import pytest

from elastic.malware_config_extractor.utils import connect_elasticsearch

# Set these values in `.env`
ELASTIC_INPUT_TEST_CFG = {
    "enabled": True,
    "cloud": {"id": os.environ.get("CLOUD_ID")},
    "index": os.environ.get("INPUT_ELASTICSEARCH_INDEX"),
    "api_key": os.environ.get("INPUT_ELASTICSEARCH_APIKEY"),
}


@pytest.mark.skip(reason="no way of currently testing this")
def test_connect_input_elasticsearch():
    _client = connect_elasticsearch(es_config=ELASTIC_INPUT_TEST_CFG)
    assert _client.ping() is True


def test_scrolled_elasticsearch_query_returns_results():
    pass


def test_scrolled_elasticsearch_query_fails():
    # todo: write this if needed
    pass


def test_make_dataframe():
    pass
